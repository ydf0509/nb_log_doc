# 7 nb_log 打印三方包的日志

## 7.1 nb_log 记录三方包日志的方法，requests举例子

一般三方包的每个模块都会写 logger = logging.getLogger(__name__)，很多人非常之蒙蔽对这句话。

这个是创建了当前 包名.文件夹名.模块名 的日志命名空间,但没有创建handler，所以里面 logger.info() 是不会被记录到的。

只有对这个命名空间的logger加上handlers后才会记录到各种地方。


```python
from nb_log import get_logger
import requests

get_logger('urllib3')  # 也可以更精确只捕获 urllib3.connectionpool 的日志，不要urllib3包其他模块文件的日志
requests.get("http://www.baidu.com")
```


<a href="https://imgtu.com/i/hJbkrD"><img src="https://z3.ax1x.com/2021/08/30/hJbkrD.png" alt="hJbkrD.png" border="0" /></a>
 



有的人要记录请求了什么，状态是什么，非要自己亲自写日志，那其实urllib3对每个请求和状态码都记录了，
并不需要用户去亲自再重复写logger.info("请求了什么url  耗时多少 状态码是什么")，这些都是多此一举，主要是用户不懂日志命名空间。
如上图，get_logger 对 urllib3 命名空间的日志加上了控制台handler后就会自动记录到请求了什么url和响应情况了，完全不需要用户修复写代码。

requests包会调用urllib3,urllib3包里面记录了日志请求什么了，所以上面是 get_logger('urllib3') 而不是 get_logger('requests'),
一般情况下 get_logger(name=三方包名就可以了)

### 7.1.b nb_log还可以记录flask/django

例如 get_logger(name="flask",log_file_name='myfile.log') ,就会记录到flask的日志到控制台和myfile.log了。























<div> </div>